{"version":3,"sources":["webpack:///./src/templates/post/Author.js","webpack:///./src/templates/post/index.js","webpack:///./src/pages/20200409-inside-magic-motion.mdx"],"names":["authors","mattperry","img","ImgMattPerryProfile","name","Container","styled","div","Avatar","media","phone","Name","span","Seperator","Author","id","date","src","alt","props","children","pageContext","frontmatter","title","description","author","keywords","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","style","allow","sandbox","animations","isMDXComponent"],"mappings":"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","file":"component---src-pages-20200409-inside-magic-motion-mdx-9f4ea110d7595d555eb8.js","sourcesContent":["import React from \"react\";\nimport ImgMattPerryProfile from \"../../images/photo-of-matt-perry.jpg\";\nimport styled from \"styled-components\";\nimport { media } from \"../../utils/media\";\n\nconst authors = {\n  mattperry: {\n    img: ImgMattPerryProfile,\n    name: \"Matt Perry\"\n  }\n};\n\nconst Container = styled.div`\n  display: flex !important;\n  align-items: center;\n  font-size: 16px;\n  margin-bottom: 20px;\n`;\n\nconst Avatar = styled.img`\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  margin-right: 10px;\n\n  ${media.phone`\n    width: 32px;\n    height: 32px;\n  `}\n`;\n\nconst Name = styled.span`\n  font-weight: 600;\n`;\n\nconst Seperator = styled.span`\n  margin: 0 10px;\n`;\n\nexport const Author = ({ id = \"mattperry\", date }) => {\n  if (!authors[id]) return null;\n\n  return (\n    <Container>\n      <Avatar src={authors[id].img} alt=\"\" />\n      <Name>{authors[id].name}</Name>\n      <Seperator>{`|`}</Seperator>\n      {date}\n    </Container>\n  );\n};\n","import React from \"react\";\nimport Layout from \"../../components/layout\";\nimport SEO from \"../../components/seo\";\nimport { Title, ContentContainer } from \"../../components/bits\";\nimport { Author } from \"./Author\";\n\nexport default (props) => {\n  const { children, pageContext } = props;\n  const { date, frontmatter } = pageContext;\n  const { title, description, author } = frontmatter;\n\n  return (\n    <Layout>\n      <SEO\n        title={title}\n        description={description}\n        keywords={[\n          `matt perry`,\n          `popmotion`,\n          `react`,\n          `pose`,\n          `popmotion pose`,\n          `framer`,\n          `framer motion`,\n          `ui animation`,\n        ]}\n      />\n      <article>\n        <Title>{title}</Title>\n        <ContentContainer>\n          <Author id={author} date={date} />\n        </ContentContainer>\n        <ContentContainer>{children}</ContentContainer>\n      </article>\n    </Layout>\n  );\n};\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/mattperry/Sites/inventingwithmonster.github.io/src/templates/post/index.js\";\nimport { Switch } from \"../examples/20200408/Switch\";\nimport { Distorted, Undistorted, Independent, IndependentBroken } from \"../examples/20200408/Distortion\";\nimport { ShadowRatio } from \"../examples/20200408/ShadowRatio\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <p>{`Magic Motion is a powerful new feature in `}<a parentName=\"p\" {...{\n        \"href\": \"https://framer.com\"\n      }}>{`Framer`}</a>{` that allows designers to draw a line between any two screens and have a prototype that will smoothly animate between them.`}</p>\n    <p>{`It’s built on the new `}<a parentName=\"p\" {...{\n        \"href\": \"https://framer.com/api/motion/animation/#automatic-(beta)\"\n      }}>{`auto-animate`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"https://framer.com/api/motion/animate-shared-layout\"\n      }}>{`shared layout`}</a>{` features in Framer Motion 2. As a developer, handoff is no longer a pit-of-the-stomach experience, a hasty “you can’t do that on the web!”`}</p>\n    <p>{`Implementing a Magic Motion prototype as a production-ready, URL-driven animation between completely different views is just a few lines of React markup:`}</p>\n    <iframe src=\"https://codesandbox.io/embed/framer-motion-magic-motion-app-store-demo-su6mx?fontsize=14&theme=light\" style={{\n      \"width\": \"100%\",\n      \"height\": \"500px\",\n      \"border\": \"0\",\n      \"borderRadius\": \"4px\",\n      \"overflow\": \"hidden\",\n      \"marginBottom\": \"40px\"\n    }} title=\"Framer Motion: Magic Motion App Store demo\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n    <p>{`Crucially, Framer Motion performs all these layout animations at 60fps. In this this post, we’re going to learn how.`}</p>\n    <h2 {...{\n      \"id\": \"the-problem\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#the-problem\",\n        \"aria-label\": \"the problem permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`The Problem`}</h2>\n    <p>{`CSS offers a number of different layout systems that can all interoperate with each other. A flexbox can be placed with in an absolutely positioned grid that sits within a static `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`float: right`}</code>{`.`}</p>\n    <p>{`With all these possibilities, calculating how a webpage should look is expensive. At 60fps a browser has just 16.6 milliseconds to update the screen before the next frame. It’s unlikely that a browser will be able to update a layout within that frame budget, so there’s no real API that lets you try.`}</p>\n    <p>{`Take this switch, which is laid out using a simple flexbox. Even with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`transition: all`}</code>{`, changing `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`justify-content`}</code>{` has an instant effect:`}</p>\n    <Switch animations={false} mdxType=\"Switch\" />\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`switch `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  justify`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`-`}</span>{`content`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` align`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`-`}</span>{`start`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  transition`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` all`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`switch`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`on `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  justify`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`-`}</span>{`content`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` align`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`-`}</span>{`end`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code></pre></div>\n    <p>{`So developers are limited in their options. Ideally, animations should be performed using cheap `}<a parentName=\"p\" {...{\n        \"href\": \"https://csstriggers.com/\"\n      }}>{`compositable properties`}</a>{` like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`transform`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`opacity`}</code>{`. Properties like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`background-color`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`box-shadow`}</code>{` trigger paint, which is a little more expensive, but sometimes it’s unavoidable.`}</p>\n    <p>{`What we ideally want then, is a way of animating layout using only transforms.`}</p>\n    <h2 {...{\n      \"id\": \"flip\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#flip\",\n        \"aria-label\": \"flip permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`FLIP`}</h2>\n    <p>{`The technique at the core of performant layout transitions in the browser was first described by `}<a parentName=\"p\" {...{\n        \"href\": \"https://aerotwist.com/blog/flip-your-animations/\"\n      }}>{`Paul Lewis`}</a>{`.`}</p>\n    <p>{`It’s called FLIP, which stands for `}<strong parentName=\"p\">{`F`}</strong>{`irst, `}<strong parentName=\"p\">{`L`}</strong>{`ast, `}<strong parentName=\"p\">{`I`}</strong>{`nvert, `}<strong parentName=\"p\">{`P`}</strong>{`lay.`}</p>\n    <p>{`That is, we:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Measure the first layout`}</li>\n      <li parentName=\"ol\">{`Update the CSS and measure the last layout`}</li>\n      <li parentName=\"ol\">{`Apply the inverted delta as a `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`transform`}</code>{` to make the last layout look like the first`}</li>\n      <li parentName=\"ol\">{`Play the animation`}</li>\n    </ol>\n    <p>{`So we do the expensive thing (layout) at the start of the animation, where we have a window of time where the user won’t notice heavy work. Then we do the cheap thing (animating `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`transform`}</code>{`) once per frame.`}</p>\n    <p>{`For very simple use-cases, this is enough to smoothly animate layout:`}</p>\n    <Switch mdxType=\"Switch\" />\n    <p>{`But there’s a drawback to FLIP that can instantly wreck the illusion. `}<strong parentName=\"p\">{`Scale distortion`}</strong>{`.`}</p>\n    <p>{`By replacing the animation of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`width`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`height`}</code>{` with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`scaleX`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`scaleY`}</code>{`, everything style that was bound to that width and height is visibly broken. This includes `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`box-shadow`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-radius`}</code>{`, and the size and styles of any children too.`}</p>\n    <p>{`Try clicking on this box and notice the types of distortions seen when toggling between its two visual states.`}</p>\n    <Distorted mdxType=\"Distorted\" />\n    <p>{`Magic Motion’s key innovation is the ability to correct all of this visual distortion, throughout an infinitely deep tree:`}</p>\n    <Undistorted mdxType=\"Undistorted\" />\n    <p>{`This is `}<strong parentName=\"p\">{`scale correction`}</strong>{`. We apply it to CSS properties that can be corrected without triggering layout, like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`box-shadow`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-radius`}</code>{`.`}</p>\n    <p>{`It’s applied throughout a tree on any component that a user has set to automatically animate:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`<`}</span>{`motion.div`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token attr-name\"\n            }}>{`animate`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`/>`}</span></span></code></pre></div>\n    <p>{`Or has included in a shared element transition:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`<`}</span>{`motion.div`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token attr-name\"\n            }}>{`layoutId`}</span><span parentName=\"span\" {...{\n              \"className\": \"token attr-value\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`=`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`\"`}</span>{`header`}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`\"`}</span></span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`/>`}</span></span></code></pre></div>\n    <p>{`In the future, we may bring scale correction to all `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`motion`}</code>{` components.`}</p>\n    <h2 {...{\n      \"id\": \"correcting-css-styles\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#correcting-css-styles\",\n        \"aria-label\": \"correcting css styles permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Correcting CSS Styles`}</h2>\n    <p>{`Correcting the appearance of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-radius`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`box-shadow`}</code>{` is a three step process.`}</p>\n    <p>{`First, if we’re animating between two different values, we interpolate between those.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` borderRadius `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`mix`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`origin`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` target`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` time`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`Second, we keep a record of the “actual”, pre-correction value. If the animation is interrupted, the next animation will start from this rather than the final scale-corrected value (which might have no relevance in a future scale context).`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`this`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`current`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`borderRadius `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` borderRadius`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`Finally, we apply the scale correction.`}</p>\n    <p>{`The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-radius`}</code>{` style can be set per-corner with styles like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-top-left-radius`}</code>{`. Each corner can accept two values, one for each axis. So to correct for each axis, we divide the current `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-radius`}</code>{` once by the scale of each.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` x `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` borderRadius `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`/`}</span>{` scaleX`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` y `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` borderRadius `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`/`}</span>{` scaleY`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\nelement`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`style`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`borderTopLeftRadius `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token template-string\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token template-punctuation string\"\n            }}>{`\\``}</span><span parentName=\"span\" {...{\n              \"className\": \"token interpolation\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token interpolation-punctuation punctuation\"\n              }}>{`\\${`}</span>{`x`}<span parentName=\"span\" {...{\n                \"className\": \"token interpolation-punctuation punctuation\"\n              }}>{`}`}</span></span><span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`px `}</span><span parentName=\"span\" {...{\n              \"className\": \"token interpolation\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token interpolation-punctuation punctuation\"\n              }}>{`\\${`}</span>{`y`}<span parentName=\"span\" {...{\n                \"className\": \"token interpolation-punctuation punctuation\"\n              }}>{`}`}</span></span><span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`px`}</span><span parentName=\"span\" {...{\n              \"className\": \"token template-punctuation string\"\n            }}>{`\\``}</span></span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p><code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`box-shadow`}</code>{` has an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`x`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`y`}</code>{` setting that be corrected in the same way, but it also has `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`blur`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`spread`}</code>{` that don’t have single-axis controls. To correct these values, we take an average scale and apply that to both instead:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` averageScale `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`mix`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`scaleX`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` scaleY`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`0.5`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\nblur `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` blur `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`/`}</span>{` averageScale`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\nspread `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` spread `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`/`}</span>{` averageScale`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`This works pretty well but it isn’t perfect. The limitations of this approach are increasingly obvious with more extreme ratios of x/y distortion:`}</p>\n    <ShadowRatio mdxType=\"ShadowRatio\" />\n    <p>{`But generally the ratios we animate from/to are similar enough that the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`blur`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`spread`}</code>{` scale correction looks pretty good. In the future there may be some weighting we can do to stop the more extreme distortions.`}</p>\n    <p>{`Correcting these two styles fixes most of the visual distortion on a component. But we’re still left with the distortion of children.`}</p>\n    <h2 {...{\n      \"id\": \"correcting-child-components\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#correcting-child-components\",\n        \"aria-label\": \"correcting child components permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Correcting Child Components`}</h2>\n    <p>{`Without child correction, the shape of this round ball becomes distorted as its parent changes `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`scaleX`}</code>{`:`}</p>\n    <IndependentBroken mdxType=\"IndependentBroken\" />\n    <p>{`In addition, it would be impossible to also try and reliably animate this ball’s `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`x`}</code>{` position, because the space through which it travels through would itself be stretching and squashing. This would lead to very uneven motion, like it was sat upon lapping waves.`}</p>\n    <p>{`Correcting child distortion is where we start to pull away from the literal technique of FLIP and adhere to it more in principle.`}</p>\n    <p>{`The first step is to loop through every animating component and remove any currently animating styles. Then, we snapshot their layout in a second pass.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}>{`children`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`forEach`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}>{`child`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=>`}</span>{` child`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`reset`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\nchildren`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`forEach`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}>{`child`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=>`}</span>{` child`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`snapshot`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`By batching the reads and writes in this way we prevent `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing\"\n      }}>{`layout thrashing`}</a>{`. In Framer, a prototype might have hundreds of animating components, so optimising this can have a profound effect on performance.`}</p>\n    <p>{`We also ensure we’re snapshotting every component as it will exist on the screen in its final state, unaffected by the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`transform`}</code>{` of its parent(s).`}</p>\n    <p>{`This is important, because it means we can then track, within a tree, all of the transforms we’ve applied to each component, then use this to correct the appearance of its children.`}</p>\n    <p>{`Because we want to play the animation of every component independently of this tree transform (to avoid the lapping waves), each component has a shadow bounding box. This gets interpolated from its visual origin to its target once per frame.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` latest `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`mix`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`origin`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` target`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` time`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`target`}</code>{` is `}<strong parentName=\"p\">{`usually`}</strong>{` the same as the measured last layout (the `}<strong parentName=\"p\">{`L`}</strong>{` in FLIP), but for some effects like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`AnimateSharedLayout`}</code>{`’s crossfade it might be somewhere else on screen. Either way, we now know where on the screen we want our component to appear visually.`}</p>\n    <p>{`We use this information to calculate the delta between where we want the component to appear, and where it actually is.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` delta `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`calcDelta`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`latest`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` actualPosition`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`The component saves this `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`delta`}</code>{` to a context that all of its children have access to. The component itself might also have some parent deltas that it has to correct for. So before calculating `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`delta`}</code>{` we first apply all the latest parent deltas to the actual measured position.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` latest `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`mix`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`origin`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` target`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` t`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` transformedPosition `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`applyParentDeltas`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`actualPosition`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` parentDeltas`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` delta `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`calcDelta`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`latest`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` transformedPosition`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`This is how the scale correction is performed. By applying `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`parentDeltas`}</code>{` to the actual position, we are then just left with figuring out how to get from there to our desired visual position.`}</p>\n    <p>{`As a final step, we also use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`parentDeltas`}</code>{` to calculate the combined scale of the tree. We can use this on the CSS style corrections from before, so they correct parent distortions too:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"jsx\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-jsx\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-jsx\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` x `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` borderRadius `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`/`}</span>{` scaleX `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`/`}</span>{` treeScaleX`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <p>{`Our ball now stays the correct size, and can even animate through scaled space even as it distorts around it:`}</p>\n    <Independent mdxType=\"Independent\" />\n    <h2 {...{\n      \"id\": \"conclusion\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#conclusion\",\n        \"aria-label\": \"conclusion permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Conclusion`}</h2>\n    <p>{`Animating layout in the browser is hard, but Framer and Framer Motion are presenting it in an accessible way, removing all the friction from handoff.`}</p>\n    <p>{`Thanks to the foundations of the FLIP technique, we can do this at 60fps. By accounting for tree transformations, its possible to correct scale distortions throughout an infinitely deep tree, on size, position and even CSS styles like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`box-shadow`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`border-radius`}</code>{`.`}</p>\n    <p>{`If you’re a designer, sign up for the `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.framer.com/web/\"\n      }}>{`Framer beta`}</a>{`, and if you’re a developer you can try out the new `}<a parentName=\"p\" {...{\n        \"href\": \"https://framer.com/api/motion/animation/#automatic-(beta)\"\n      }}>{`auto-animate`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"https://framer.com/api/motion/animate-shared-layout\"\n      }}>{`shared layout`}</a>{` features in the Framer Motion 2 open beta right now!`}</p>\n    {\n      /*\n      Magic Motion is a powerful new feature in Framer Motion 2 that can automatically animate between any two views. Let's take a look at what it does, and how it works.\n      Today, we released Framer Motion 2 into [open beta](#). It introduces a single new feature, Magic Motion. It packs a ton of power into a very simple API, allowing you to automatically animate between any two visual states.\n      It scales from very simple jobs, like animating a single component between two CSS states:\n      <iframe\n          src=\"https://codesandbox.io/embed/framer-motion-magic-motion-switch-demo-vwmug?fontsize=14&hidenavigation=1&theme=dark\"\n          style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;margin-bottom: 40px;\"\n          title=\"Framer Motion: Magic Motion App Store demo\"\n          allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n          sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"\n        ></iframe>\n      To complex transitions, like this multi-component, React Router-powered App Store demo:\n      <iframe\n          src=\"https://codesandbox.io/embed/framer-motion-magic-motion-app-store-demo-su6mx?fontsize=14&hidenavigation=1&theme=dark\"\n          style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;margin-bottom: 40px;\"\n          title=\"Framer Motion: Magic Motion App Store demo\"\n          allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n          sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"\n        ></iframe>\n      Crucially, it does all the above by only triggering a single expensive layout operation and performing the actual animations using the [FLIP technique](https://aerotwist.com/blog/flip-your-animations/).\n      Usually, animating a component's width and height using scale introduces visual distortion on border radius, shadows and children elements. Try toggling between these two visual states and note the distortion:\n      -- Insert obvious scaling demonstration\n      Magic Motion corrects all FLIP-induced distortion:\n      -- Insert obvious scaling demonstration\n      In this post we're going to take a brief look at the basic API before diving into some implementation details that cover\n      ## API Basics\n      In its simplest application, tagging a `motion` component with the new `magic` prop will automatically animate between visual differences triggered by a component re-render.\n      ```jsx\n      <motion.div magic />\n      ```\n      The animation used can be customised using the `transition` prop:\n      ```jsx\n      <motion.div magic transition={{ duration: 0.2 }}>\n      ```\n      If any children are experiencing unwanted visual distortion, this can be corrected by tagging those with `magic`, too:\n      ```jsx\n      <motion.ol magic>\n       <motion.li magic />\n      </motion.ol>\n      ```\n      The `magic` prop is super-powerful when animating CSS layout. Try clicking the coloured boxes to open and close them:\n      <iframe\n          src=\"https://codesandbox.io/embed/framer-motion-magic-motion-accordion-demo-w5774?fontsize=14&hidenavigation=1&theme=dark\"\n          style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;margin-bottom: 40px;\"\n          title=\"Framer Motion: Magic Motion App Store demo\"\n          allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n          sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"\n        ></iframe>\n      When a box opens, its `height` switches from `30px` to its full size. The container and all its siblings will animate to their new CSS layout using performant transforms, without any visual distortion.\n      So far, we've seen how Magic Motion can animate a single set of components as they change state. But it can also make entirely separate components animate to and from each other. We can use this technique for a variety of effects including full shared element transitions between different routes.\n      We first need to use the `SharedMagicMotion` component. It can keep track of `motion` components that are tagged with a `sharedId` prop.\n      ```jsx\n      <SharedMagicMotion>\n       <motion.div sharedId=\"underline\" />\n      </SharedMagicMotion>\n      ```\n      When a new component is added within `SharedMagicMotion` with an existing `sharedId`, it will visually animate from the last component that had it.\n      <iframe\n          src=\"https://codesandbox.io/embed/framer-motion-magic-motion-underline-menu-demo-y6tl3?fontsize=14&hidenavigation=1&theme=dark\"\n          style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n          title=\"Framer Motion: Magic Motion underline menu demo\"\n          allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n          sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"\n        ></iframe>\n      The code used to create that underline animation boils down to this:\n      ```jsx\n      isSelected && <motion.div sharedId=\"underline\" />;\n      ```\n      This works whether the old component is removed or persists. If you choose to keep it around, it'll be automatically hidden but maintain its place in the layout to maintain the illusion that the component animating out is the same one.\n      <iframe\n          src=\"https://codesandbox.io/embed/framer-motion-magic-motion-gallery-demo-pknk7?fontsize=14&hidenavigation=1&theme=dark\"\n          style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n          title=\"Framer Motion: Magic Motion underline menu demo\"\n          allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n          sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"\n        ></iframe>\n      By wrapping this new component in `AnimatePresence`, it'll automatically animate back to its old position before being removed.\n      ```jsx\n      <SharedMagicMotion>\n       <List />\n       <AnimatePresence>{open && <Item />}</AnimatePresence>\n      </SharedMagicMotion>\n      ```\n      That's the majority of the API. By combining these simple we can create effects as complex as the App Store demo.\n      If you're just here to see what you can do with Magic Motion, then go ahead and download the [open beta](#)! Share your creations with me on [Twitter](https://twitter.com/mattgperry) and file any bugs you discover [on our issues page](https://github.com/framer/motion/issues).\n      Now we're going to take a look at some of\n      ## Snapshotting in React\n      To work, Magic Motion needs to take a snapshot of an element just before, and synchronously after a DOM update.\n      Framer Motion is primarily written in hooks. The `useLayoutEffect` would make it trivial to take a snapshot just after a component re-renders but there's no hook that provides the\n      makes the latter possible, but there's no hook that allows you to take a snapshot just before an update. So the components that provide the magic functionality are written as class components to leverage the `getSnapshotBeforeUpdate` lifecycle method.\n      The problem with resetting a component's styles and then taking a snapshot is we're writing to the DOM and then reading from it.\n      ```jsx\n      // Write\n      Object.assign(element.style, resetStyles);\n      // Read\n      const boundingBox = element.getBoundingClientRect();\n      const styles = window.getComputedStyle(element);\n      ```\n      When you do this write/read/write/read cycle repeatedly to a lot of components the browser is forced to trigger layout every time. This has a serious negative effect on performance.\n      In the Framer app we could be doing this to hundreds of components at once, so this delay would be quite noticeable.\n      To solve this, updating components register themselves to an update batcher during the `getSnapshotBeforeUpdate` phase. Then, the first to fire their `componentWillUpdate` fires\n      ```jsx\n      // Write\n      children.forEach((child) => child.reset());\n      // Read\n      children.forEach((child) => child.snapshot());\n      // Write\n      children.forEach((child) => child.startAnimation());\n      ```\n      */\n    }\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}
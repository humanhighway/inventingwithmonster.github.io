(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/+yk":function(e,a,t){"use strict";var n=t("q1tI"),s=t.n(n),c=t("Bl7J"),o=t("vrFN"),m=t("3WHN"),i=t("p6Wu"),p=(t("pJf4"),t("I/2l")),r=t.n(p),l=t("vOnD"),b=t("VBu3");function d(){var e=function(e,a){a||(a=e.slice(0));return e.raw=a,e}(["\n    width: 32px;\n    height: 32px;\n  "]);return d=function(){return e},e}var u={mattperry:{img:r.a,name:"Matt Perry"}},j=l.d.div.withConfig({displayName:"Author__Container",componentId:"sc-1jp4vsk-0"})(["display:flex !important;align-items:center;font-size:16px;margin-bottom:20px;"]),O=l.d.img.withConfig({displayName:"Author__Avatar",componentId:"sc-1jp4vsk-1"})(["width:40px;height:40px;border-radius:50%;margin-right:10px;",""],b.a.phone(d())),N=l.d.span.withConfig({displayName:"Author__Name",componentId:"sc-1jp4vsk-2"})(["font-weight:600;"]),g=l.d.span.withConfig({displayName:"Author__Seperator",componentId:"sc-1jp4vsk-3"})(["margin:0 10px;"]),x=function(e){var a=e.id,t=void 0===a?"mattperry":a,n=e.date;return u[t]?s.a.createElement(j,null,s.a.createElement(O,{src:u[t].img,alt:""}),s.a.createElement(N,null,u[t].name),s.a.createElement(g,null,"|"),n):null},h=t("A2+M");a.a=function(e){var a=e.data,t=e.pageContext;console.log(t);var n=Object(m.c)(a),p=n.body,r=n.title,l=n.author,b=n.date,d=n.excerpt;return s.a.createElement(c.a,null,s.a.createElement(o.a,{title:r,description:d,keywords:["matt perry","popmotion","react","pose","popmotion pose","framer","framer motion","ui animation"]}),s.a.createElement("article",null,s.a.createElement(i.b,null,r),s.a.createElement(i.a,null,s.a.createElement(x,{id:l,date:b})),s.a.createElement(i.a,null,s.a.createElement(h.MDXRenderer,null,p))))}},"3WHN":function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return i})),t.d(a,"c",(function(){return p}));var n=function(e){return e.allMdx.edges},s=function(e){return e.fields.slug},c=function(e){return e.frontmatter.title},o=function(e){return e.frontmatter.date},m=function(e){return e.fields.description},i=function(e){return{id:s(e),title:c(e),date:o(e),excerpt:m(e)}},p=function(e){var a=e.mdx;return{id:s(a),title:c(a),date:o(a),author:a.frontmatter.author,body:a.body,excerpt:m(a)}}},"A2+M":function(e,a,t){var n=t("X8hv");e.exports={MDXRenderer:n}},IkSw:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return c})),t.d(a,"default",(function(){return i}));t("rzGZ"),t("Dq+y"),t("8npG"),t("Ggvi"),t("E5k/"),t("q1tI");var n=t("7ljp"),s=t("/+yk");var c={},o={_frontmatter:c},m=s.a;function i(e){var a=e.components,t=function(e,a){if(null==e)return{};var t,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,["components"]);return Object(n.mdx)(m,Object.assign({},o,t,{components:a,mdxType:"MDXLayout"}),Object(n.mdx)("p",null,"React Hooks have finally landed! So many emotions. Here‚Äôs a small selection of my own in chronological order: üßê ü§Ø üòç"),Object(n.mdx)("p",null,"I‚Äôve been writing a library using Hooks for about three months now, and my final, never-gonna-bother-thinking-further-on-this opinion is that they‚Äôre amazing, and can enable you to write equally amazing code."),Object(n.mdx)("p",null,"Of course, like anything Alanis Morissette mistakenly considers ‚Äúirony‚Äù, something so beautiful can‚Äôt exist in this universe without caveats."),Object(n.mdx)("p",null,"In the case of Hooks, those caveats come in the ",Object(n.mdx)("a",Object.assign({parentName:"p"},{href:"https://reactjs.org/docs/hooks-rules.html#explanation"}),"form of rules"),"."),Object(n.mdx)("p",null,"Today, I want to talk about one in particular. This one:"),Object(n.mdx)("blockquote",null,Object(n.mdx)("p",{parentName:"blockquote"},"Only call Hooks at the top level. Don‚Äôt call Hooks inside loops, conditions, or nested functions.")),Object(n.mdx)("p",null,"Personally, when I saw this rule, I could only think one thing:"),Object(n.mdx)("h2",{id:"witchcraft",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h2"},{href:"#witchcraft","aria-label":"witchcraft permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Witchcraft!"),Object(n.mdx)("p",null,"Why do (what look to be) normal functions have ",Object(n.mdx)("em",{parentName:"p"},"rules")," around their usage? No loops? No conditions? It must be magic!"),Object(n.mdx)("p",null,"Of course, like most magic, it isn‚Äôt actually magic."),Object(n.mdx)("p",null,"Dan Abramov explains in ",Object(n.mdx)("a",Object.assign({parentName:"p"},{href:"https://overreacted.io/why-do-hooks-rely-on-call-order/"}),"more detail on his blog"),", but the key take-away for us is:"),Object(n.mdx)("ol",null,Object(n.mdx)("li",{parentName:"ol"},"React knows which component is being rendered at any given time, therefore:"),Object(n.mdx)("li",{parentName:"ol"},"When a Hook is called, it knows which component is calling it, therefore:"),Object(n.mdx)("li",{parentName:"ol"},"If we change the calling order of Hooks within a component, React gets confused and breaks, therefore:"),Object(n.mdx)("li",{parentName:"ol"},Object(n.mdx)("strong",{parentName:"li"},"If we want to run Hooks within a loop, or conditionally, we need to abstract them into a stand-alone components"),".")),Object(n.mdx)("h2",{id:"pause-for-thought",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h2"},{href:"#pause-for-thought","aria-label":"pause for thought permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Pause for thought"),Object(n.mdx)("p",null,"As ",Object(n.mdx)("a",Object.assign({parentName:"p"},{href:"https://twitter.com/codehitchhiker"}),"Cher")," rightfully points out in ",Object(n.mdx)("a",Object.assign({parentName:"p"},{href:"https://twitter.com/codehitchhiker/status/1093500712154292224"}),"this tweet"),":"),Object(n.mdx)("blockquote",null,Object(n.mdx)("p",{parentName:"blockquote"},"‚Ä¶you should ask yourself why you‚Äôre breaking a rule. Is it because there‚Äôs no way to accomplish what you‚Äôre trying to do (ie, there‚Äôs a gap in the ecosystem that needs properly filled?), or is it because you don‚Äôt understand the reasons for the rules?")),Object(n.mdx)("p",null,"Are you breaking the rules to genuinely circumvent a technical limitation? Or is React actually saving you from making a serious mistake?"),Object(n.mdx)("p",null,"As ",Object(n.mdx)("a",Object.assign({parentName:"p"},{href:"https://twitter.com/dan_abramov/status/1093499692422492161"}),"Dan notes"),":"),Object(n.mdx)("blockquote",null,Object(n.mdx)("p",{parentName:"blockquote"},"‚Ä¶the reason it‚Äôs disallowed is not strictly a technical one. It‚Äôs that any behavior you could pick would be surprising in some case. Like, when does conditional state reset? What can state inside of an event possibly mean?")),Object(n.mdx)("p",null,Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"useState"),", to give one example, provides state ",Object(n.mdx)("strong",{parentName:"p"},"for the lifetime of a component"),". It doesn‚Äôt make sense to live inside an inline function:"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"div"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"onClick"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"const")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"["),"count",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," setCount",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"]")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"useState"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token number"}),"0"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token comment"}),"// What now motherfucker?"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),"\n",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"/>"))))),Object(n.mdx)("p",null,"With that said, in this post I want to concentrate on circumventing the purely ",Object(n.mdx)("strong",{parentName:"p"},"technical")," limitations of Hooks, in case you run into any of these situations yourself. We‚Äôre not trying to hack anything, just solve your problems in a genuinely ‚ÄúReact‚Äù way."),Object(n.mdx)("h2",{id:"running-hooks-within-a-loop",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h2"},{href:"#running-hooks-within-a-loop","aria-label":"running hooks within a loop permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Running Hooks within a loop"),Object(n.mdx)("p",null,"Firing functions within a loop is one of the first things we learn, so the natural impulse is to do the same with Hooks."),Object(n.mdx)("p",null,"Consider the following component:"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"List")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," items ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// Loop over items with .map"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," items",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"map"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"item")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ref ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useRef"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useEffect"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"/* Do something with ref */"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"li")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"ref"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"ref",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"item",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"label",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"li"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"Looks normal, right? Sober. Well I‚Äôve got news for you buddy. It isn‚Äôt."),Object(n.mdx)("p",null,"The trouble with the above code isn‚Äôt that it breaks, it‚Äôs ",Object(n.mdx)("strong",{parentName:"p"},"that it works"),". Even though we‚Äôre using Hooks within a loop it‚Äôll still run just fine on the first render."),Object(n.mdx)("p",null,"If ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"items")," stays in the same order and the same length, it‚Äôll actually run ‚Äújust fine‚Äù forever, because the order and number of Hooks that the component fires stays consistent."),Object(n.mdx)("p",null,"But the rule exists because this is way too big an assumption to make. If ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"items")," ",Object(n.mdx)("strong",{parentName:"p"},"does")," change in any way, your site or app will break."),Object(n.mdx)("h3",{id:"the-solution",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h3"},{href:"#the-solution","aria-label":"the solution permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"The solution"),Object(n.mdx)("p",null,"As I said somewhere in the dark ages of this post, to fix this we need to abstract the loop‚Äôs contents into a component."),Object(n.mdx)("p",null,"Create a new component, ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Item"),", that renders out just one of our ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"item"),"s:"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"Item")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," label ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ref ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useRef"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useEffect"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"/* Do something with ref */"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"li"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"label",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"li"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"Render this ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Item")," component from the loop:"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"List")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," items ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," items",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"map"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," label ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Item"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"label"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"label",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"/>")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"Now, the length and order of ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"items")," can change without our code breaking. Whenever ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Item")," is rendered, React knows its rendering a ",Object(n.mdx)("em",{parentName:"p"},"different component"),", and that information is all it needs to correctly keep track of which Hooks are firing where."),Object(n.mdx)("h2",{id:"running-hooks-conditionally",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h2"},{href:"#running-hooks-conditionally","aria-label":"running hooks conditionally permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Running Hooks conditionally"),Object(n.mdx)("p",null,"Conditionally firing functions is also one of the first things we learn to do, but you can‚Äôt with Hooks."),Object(n.mdx)("p",null,"Your instinct, though, tells you to write code like this (apologies for the abstract example):"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"Component")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," enable ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ref ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useRef"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"enable",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useFunctionality"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"ref",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"div")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"ref"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"ref",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"/>")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"If ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"enable")," changes, a different number of Hooks are going to be called, and React will throw an error (quite rightfully, you careless charlatan)."),Object(n.mdx)("h3",{id:"the-solution-1",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h3"},{href:"#the-solution-1","aria-label":"the solution 1 permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"The solution"),Object(n.mdx)("p",null,"As before, abstract this Hook into a stand-alone component, this one that just returns ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"null"),":"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," Functionality ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," React",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"forwardRef"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),"props",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ref"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useFunctionality"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"ref",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"null"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"To call this Hook conditionally, we can now render the ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Functionality")," component conditionally:"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"Component")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token parameter"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")," enable ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ref ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"useRef"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<")),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token plain-text"}),"\n      "),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"enable ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&&")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Functionality"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"ref"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"ref",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"/>")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token plain-text"}),"\n      "),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"div")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"ref"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"ref",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"/>")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token plain-text"}),"\n    "),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</")),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"Looking at this, your head might be where mine was when I first realised this method. Your palms are sweaty, probably shaking. You‚Äôre reaching for the gin to wash away the nascent guilt."),Object(n.mdx)("p",null,"This is a natural reaction. Roll through it, until you realise: This approach is actually legit."),Object(n.mdx)("p",null,"The exact pattern might be slightly novel (although I‚Äôm sure it‚Äôs been done before), but composing functionality using components couldn‚Äôt ",Object(n.mdx)("em",{parentName:"p"},"be")," more React."),Object(n.mdx)("p",null,"This method doesn‚Äôt work with Hooks that return a variable. But it might be of help if you‚Äôre consuming a third-party Hook, or writing a complex one of your own."),Object(n.mdx)("p",null,"You might be wondering why I didn‚Äôt make ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Functionality")," return ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"children")," and use it like this:"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"jsx"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-jsx"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Functionality"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"ref"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"ref",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token plain-text"}),"\n    "),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"div")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token attr-name"}),"ref"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script language-javascript"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{"),"ref",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}"))," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"/>")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token plain-text"}),"\n  "),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Functionality")),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"That‚Äôd also be fine, but it doesn‚Äôt scale if you‚Äôre going to have multiple conditional components. Which is admittedly rare, but if you‚Äôre writing a library that exposes lots of functionality through a single, simple component, this might be something you encounter."),Object(n.mdx)("h2",{id:"running-hooks-within-a-nested-function",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h2"},{href:"#running-hooks-within-a-nested-function","aria-label":"running hooks within a nested function permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Running Hooks within a nested function"),Object(n.mdx)("p",null,"Seriously? Behave. It‚Äôs called a ‚Äúrule‚Äù for a reason yeah?"),Object(n.mdx)("p",null,"(Although if you‚Äôre interested, the reason this simply isn‚Äôt going to work, ever, is that Hooks require knowledge of what component is currently rendering. Stick a Hook in a function and it could get fired at any time - while a different component is rendering, or even while no component is rendering. And if that happens, well‚Ä¶)"),Object(n.mdx)("h2",{id:"to-end",style:{position:"relative"}},Object(n.mdx)("a",Object.assign({parentName:"h2"},{href:"#to-end","aria-label":"to end permalink",className:"anchor before"}),Object(n.mdx)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.mdx)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"To end"),Object(n.mdx)("p",null,"Hooks are special but their rules can sometimes feel like they‚Äôre limiting your ability to compose complex behaviours."),Object(n.mdx)("p",null,"When you‚Äôre drunk on Hooks it can be difficult to remember how you did things, even yesterday. But fear not! The traditional React way, composing functionality with components, is still the bedrock of how the framework functions."))}i.isMDXComponent=!0},X8hv:function(e,a,t){function n(e,a,t){return(n=s()?Reflect.construct:function(e,a,t){var n=[null];n.push.apply(n,a);var s=new(Function.bind.apply(e,n));return t&&c(s,t.prototype),s}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,a){return(c=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function o(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return m(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t("xtjI"),t("Dq+y"),t("Ggvi"),t("rzGZ"),t("m210"),t("4DPX"),t("YbXK"),t("cFtU"),t("pJf4"),t("q8oJ"),t("8npG"),t("nWfQ"),t("nWfQ"),t("pJf4"),t("q8oJ"),t("YbXK"),t("cFtU"),t("m210"),t("xtjI"),t("4DPX"),t("rzGZ"),t("Dq+y"),t("8npG"),t("Ggvi");var l=t("q1tI"),b=t("7ljp"),d=b.useMDXComponents,u=b.mdx,j=t("BfwJ").useMDXScope;e.exports=function(e){var a=e.scope,t=e.components,s=e.children,c=function(e,a){if(null==e)return{};var t,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,["scope","components","children"]),m=d(t),i=j(a),r=l.useMemo((function(){if(!s)return null;var e=p({React:l,mdx:u},i),a=Object.keys(e),t=a.map((function(a){return e[a]}));return n(Function,["_fn"].concat(o(a),[""+s])).apply(void 0,[{}].concat(o(t)))}),[s,a]);return l.createElement(r,p({components:m},c))}},nWfQ:function(e,a,t){var n=t("P8UN"),s=t("nsRs"),c=t("nONw"),o=t("1a8y"),m=t("BjK0"),i=t("96qb"),p=t("16Xr"),r=(t("emib").Reflect||{}).construct,l=i((function(){function e(){}return!(r((function(){}),[],e)instanceof e)})),b=!i((function(){r((function(){}))}));n(n.S+n.F*(l||b),"Reflect",{construct:function(e,a){c(e),o(a);var t=arguments.length<3?e:c(arguments[2]);if(b&&!l)return r(e,a,t);if(e==t){switch(a.length){case 0:return new e;case 1:return new e(a[0]);case 2:return new e(a[0],a[1]);case 3:return new e(a[0],a[1],a[2]);case 4:return new e(a[0],a[1],a[2],a[3])}var n=[null];return n.push.apply(n,a),new(p.apply(e,n))}var i=t.prototype,d=s(m(i)?i:Object.prototype),u=Function.apply.call(e,d,a);return m(u)?u:d}})}}]);
//# sourceMappingURL=component---src-pages-20190207-break-the-rules-of-react-hooks-mdx-3a12b58840317b509d7e.js.map